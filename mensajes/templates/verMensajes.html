{% extends "base.html" %}

{% block title %}Inicio - My Website{% endblock %}

{% block header %}
    <h1>Mensajes</h1>
{% endblock %}

{% block content %}
    <ol class="lista-mensajes">
        {% if remitente %}
            <h2> Lista de Mensajes Enviados por {{ remitente }}</h2>
            {% for mensaje in mensajes %}
                <li style="margin-top: 15px;">
                    <h3 style="margin-bottom: 5px; text-align: center; color: #FFF;">MENSAJE</h3>
                    <b>Id: </b>{{ mensaje.id }} <br>
                    <b>Texto del Mensaje: </b>{{ mensaje.texto_del_mensaje }} <br> 
                    <b>Remitente: </b>{{ mensaje.remitente }} <br>
                    <b>Destinatario: </b>{{ mensaje.destinatario }} <br>
                    <b>Fecha de envio: </b>{{ mensaje.fecha_del_envio }}
                    <!-- Formulario para eliminar mensaje -->
                    <form method="post" action="{{url}}">
                        {% csrf_token %}
                        <input type="hidden" name="mensaje_id" value="{{ mensaje.id }}">
                        <button type="submit">Eliminar Mensaje</button>
                    </form>
                </li> <br>
            {% endfor %}
        {% elif destinatario %}
            <h2> Lista de Mensajes Recibidos por {{ destinatario }}</h2>
            {% for mensaje in mensajes %}
                <li style="margin-top: 15px;">
                    <h3 style="margin-bottom: 5px; text-align: center; color: #FFF;">MENSAJE</h3>
                    <b>Id: </b>{{ mensaje.id }} <br>
                    <b>Texto del Mensaje: </b>{{ mensaje.texto_del_mensaje }} <br> 
                    <b>Remitente: </b>{{ mensaje.remitente }} <br>
                    <b>Destinatario: </b>{{ mensaje.destinatario }} <br>
                    <b>Fecha de envio: </b>{{ mensaje.fecha_del_envio }}
                    <!-- Formulario para eliminar mensaje -->
                    <form method="post" action="{{url}}">
                        {% csrf_token %}
                        <input type="hidden" name="mensaje_id" value="{{ mensaje.id }}">
                        <button type="submit">Eliminar Mensaje</button>
                    </form>
                </li> <br>
            {% endfor %}
        {% else %}
            <p>No hay mensajes para mostrar.</p>
        {% endif %}
    </ol> 
{% endblock %}